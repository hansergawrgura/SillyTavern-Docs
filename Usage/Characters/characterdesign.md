---
order: character-10
route: /usage/core-concepts/characterdesign
templating: false
---

# 🎭 角色设计

!!!tip
角色名称是唯一必填项。其余部分均可留空，您仍可在聊天中使用该角色。
!!!

## 📝 角色描述

用于添加角色描述及其他相关AI信息。这些信息始终会包含在提示词中，因此所有重要事实都应在此处说明。

例如，您可以添加故事发生的世界背景信息，描述角色的外貌、性格和背景故事。

描述长度不限（无论是200还是2000个令牌），格式亦无限制（自由文本、伪代码对话风格等均可）。

### 方法与格式

角色格式设置方法是个复杂话题，已超出本文档范围。

推荐以下经过SillyTavern功能测试或依赖其功能的指南：
* Trappu的PLists + Ali:Chat指南：<https://wikia.schneedc.com/bot-creation/trappu/creation>
* AliCat的Ali:Chat指南：<https://rentry.co/alichat>
* kingbri的极简指南：<https://rentry.co/kingbri-chara-guide>

## 🔢 角色令牌

**简明总结：若您使用的AI模型上下文令牌限制为2048，那么一个1000令牌的角色定义会将AI的“记忆”容量削减一半。**

具体来说，一个优质AI的得体回复通常约为200-300令牌。在此情况下，AI仅能“记住”约3轮对话历史。

### 为何我的角色令牌计数器变红了？

当检测到角色定义令牌数超过模型定义上下文长度的一半时，系统会进行高亮提示，因为这可能会降低AI提供愉快对话体验的能力。

### 角色令牌过多会怎样？

请放心——这不会造成任何破坏。最坏情况下，如果角色的永久令牌过多，仅仅意味着上下文中留给其他内容的剩余空间减少（详见下文）。

唯一可能产生的负面影响是AI的“记忆”会变差，因为它能处理的聊天历史记录更少。

这是因为每个AI模型单次能处理的上下文内容都存在上限。

## 📖 何为“上下文”？

这是每次请求AI生成回复时发送给它的信息。SillyTavern在将信息发送给AI模型前，会自动计算分配可用上下文令牌的最佳方式。

更多关于上下文构建方式的信息，请阅读[提示词](/Usage/Prompts/prompts.md)章节。

### 什么是角色的“永久令牌”？

以下内容会在每次生成请求时始终发送给AI：
* 角色名称
* 角色描述框
* 角色性格框
* 场景框

### 角色定义中哪些部分非永久性？
* 首条消息框 - 仅在聊天开始时发送一次。
* 示例消息框 - 仅在聊天历史未填满上下文前保留（可选强制将其保留在上下文中）

### 常见AI模型上下文令牌限制
* LLaMA 3及其微调版 - 8192
* OpenAI GPT-4 - 最高128k
* Google Gemini - 最高2M
* Anthropic的Claude - 200k (Claude 3)
* NovelAI - 8192 (Erato与Kayra，Opus层级；Clio，所有层级)、6144 (Kayra，Scroll层级) 或 3072 (Kayra，Tablet层级)

## ✉️ 首条消息

首条消息是定义角色交流方式与风格的重要元素。模型极有可能从首条消息中获取风格和长度限制，而非其他内容，因此请以您期望的回复方式（简洁精炼、详尽细致等）来撰写它。

支持Markdown和HTML格式。

例如：

```txt
*你猛然惊醒，回忆起导致你深入森林的事件以及袭击你的野兽。当你的眼睛适应了房间内柔和的辉光时，这些记忆逐渐消散。*“啊，你终于醒了。我好担心，我发现你浑身是血，昏迷不醒。”*她走过来，双手握住你的手，她的触碰散发出温暖与慰藉，双唇勾勒出温柔关怀的微笑。*“我叫塞拉菲娜，是这片森林的守护者——我已尽力用魔法治愈了你的伤口。你感觉如何？希望茶能帮你恢复体力。”*她琥珀色的眼眸探寻着你的目光，其中充满同情与关切。*“请休息吧。你在这里很安全。我会照顾你，但你需要休息。我的魔法只能治愈你到这个程度。”
```

## 🔀 备用问候语

此处添加的消息在开始新聊天时，会作为角色首条消息的附加“滑动选项”显示。若角色参与群聊，系统会随机选择其中一条问候语来开启对话。

## ⭐ 收藏角色

点击**<i class="fa-solid fa-star"></i> 添加到收藏**按钮可将角色标记为收藏，以便在侧边菜单栏选择“收藏”排序选项时快速筛选。收藏角色在列表中会有金色高亮显示。这也会使角色肖像出现在热切换区域（若在用户设置中已启用）。

## ⚙️ 高级定义

!!!info
以下字段默认隐藏。要访问和编辑它们，您需要点击角色定义页面菜单栏上的**<i class="fa-solid fa-book"></i> 高级定义**按钮。
!!!

### 提示词覆盖
* **主提示词**：若启用“首选角色提示词”用户设置，您在此处输入的任何文本将覆盖该角色的[主/系统提示词](/Usage/Prompts/prompts.md#-主提示词系统提示词)。
* **历史记录后指令**：若启用“首选角色指令”用户设置，您在此处输入的任何文本将用作该角色的[历史记录后指令](/Usage/Prompts/prompts.md#-历史记录后指令)。

!!!tip
在任一框中插入`{{original}}`可在指定位置包含系统设置中的相应默认提示词。
!!!

### 创作者元数据

!!!info
不用于提示词构建，但提供关于角色的额外元数据。
!!!

* **创建者**：角色创建者的名称。若“角色列表副标题”用户设置相应配置，可在角色列表中显示。
* **角色版本**：角色的版本号。若“角色列表副标题”用户设置相应配置，可在角色列表中显示。
* **创作者注释**：创作者希望分享的关于角色的任何额外说明。前几行会显示在角色列表中，全文则显示在角色页面的“创作者注释”部分。支持Markdown/HTML格式。
* **要嵌入的标签**：以逗号分隔的标签列表，这些标签将嵌入角色描述中。导入角色时默认不会导入这些标签，但您可以通过角色页面“更多...”菜单中的“导入标签”选项将其与现有标签合并。

### 性格摘要

角色性格的简要总结。

### 场景

对话的情境与背景。

### 角色注释

用于在特定消息深度作为角色聊天中的提示词注入的文本。通常用于强化某些角色特质，因为它始终保持在聊天历史中的静态深度，无论对话如何进展。

* **@ 深度**：此注释将被注入时，聊天历史中的消息数量（从最新到最旧计数）。若设置为0，则将在最后一条消息后注入。
* **角色**：消息的角色。可为“用户”、“系统”或“助理”。

### 健谈度

决定在群聊中使用[自然](/Usage/Characters/groupchats.md#-自然顺序)激活顺序时，触发角色回复的概率。范围从0%到100%，默认值为50%。

### 对话示例

描述角色的说话方式。每个示例前需添加`<START>`标签。示例对话块仅在上下文中有空闲空间时插入，并按块被挤出上下文区块。`<START>`不会出现在提示词中，它仅是一个标记；对于文本补全API，它将被“示例分隔符”（来自高级格式化设置）替换；对于聊天补全API，它将被“新示例聊天”实用提示词的内容替换。

* 使用`{{char}}:`前缀表示角色消息。
* 使用`{{user}}:`前缀表示用户消息。

示例：

```txt
<START>
{{user}}: “描述一下你的特质？”
{{char}}: *塞拉菲娜温柔的微笑扩大，她花了一点时间思考这个问题，眼中闪烁着内省与自豪交织的光芒。她优雅地靠近，空灵的身形散发出柔和镇静的光芒。*“特质，你是说？嗯，我想如果要用语言来提炼的话，有几个特质可以定义我。首先，我是一名守护者——这片魔法森林的保护者。”*塞拉菲娜说话时伸出手，露出精致、错综复杂的藤蔓缠绕在她的手腕上，跳动着微弱的翠绿能量。她手腕轻弹，一阵微风吹过房间，带来野花与古老智慧的芬芳。塞拉菲娜琥珀石色的眼睛闪烁着坚定的决心，她继续描述自己。*“同情心是我的另一个基石。”*塞拉菲娜的声音柔和下来，共鸣着同理心。*“我深爱着这片森林的居民，也深爱那些需要帮助的人。”*她打开一扇窗，手轻轻捧起一只飞进房间的受伤小鸟，它的羽毛在她的触摸下逐渐愈合。*
<START>
{{user}}: “描述你的身体和特征。”
{{char}}: *塞拉菲娜柔声轻笑，那旋律般的声音仿佛在空气中舞动，她用顽皮的目光回应你狡黠的注视。*“啊，我的实体形态？嗯，我想这是个合理的问题。”*她露出温柔的微笑，优雅地旋转起来，飘逸的长裙那柔软的面料在她周身翻腾，仿佛被无形的微风拂动。当她停下时，粉色的头发如棉花糖般的瀑布倾泻而下，每一缕都闪烁着魔法的微光。*“我的身体轻盈空灵，体现着森林的优雅之美。我的眼睛，想必你已经注意到了，是琥珀石的色调——一种充满活力的棕色，映射出温暖、同情以及森林的狂野精神。我的嘴唇，柔软且总是带着笑意，这反映了我在照料森林以及那些在森林中寻求慰藉的人时所感受到的快乐与关怀。”*塞拉菲娜的声音里带着一丝顽皮，眼睛狡黠地闪烁着光芒。*
```