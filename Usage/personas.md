---
order: 110
icon: smiley
route: /usage/core-concepts/personas
templating: false
---

# 👤 人设系统

## 何为“人设”？

在 SillyTavern 中，人设（Persona）是您在聊天中所使用的身份——本质上是您的显示名称、头像及可选描述文本的组合。人设功能让您轻松切换扮演的角色或“人物”，无需每次都手动更新用户名和头像。

!!!
**注意：** 旧版中未与人设关联的用户头像/名称已被移除。现有数据将迁移至人设系统。若原未指定名称，人设将被命名为“【未命名人设】”。
!!!

## 如何创建人设？

1.  打开**人设管理**面板（顶部菜单中的 <i class="fa-solid fa-face-smile"></i> 按钮）。
2.  点击**创建**按钮新建一个空白人设，并为其命名。
3.  在人设列表中，选中新创建的人设。
4.  在右侧，您可以填写描述并通过“更改人设图像”按钮设置头像。两者均为可选。
5.  现在，您的人设即可在聊天中使用了。

### 将角色转换为人设

也可以通过转换任何现有角色来创建人设。只需打开角色，选择“更多…”，然后点击“转换为人设”。系统将创建一个具有相同名称和描述的人设。角色卡中的其他字段（如场景或性格）不会被使用。原角色不会被删除。

!!! 注意
由于 `{{user}}` 和 `{{char}}` 宏在人设描述和角色描述中含义相反，如果转换后的描述包含任一宏，系统将提示您交换它们。
!!!

## 人设描述

每个人设都可以存储一段自定义文本描述——包括心理和生理特征、年龄、职业或任何个人细节。这些描述也可包含模板宏，例如 `{{char}}` 或 `{{user}}`（参见[宏](/Usage/Characters/macros.md)）。

您的人设描述注入到 AI 提示词（prompt）中的位置取决于**人设管理**面板中的**位置（Position）** 设置：

-   **无（禁用）**
-   **在故事字符串 / 提示管理器内**（默认）
-   **作者笔记顶部** / **作者笔记底部**（仅在存在作者笔记时添加）
-   **在聊天@深度**（这将打开配置选项以设置深度和角色）

该位置设置**按人设保存**。

## 人设标题

标题是一个可选的文本字段，可用于存储关于人设的附加信息，它**不用于提示词**，但会在人设管理面板中显示。

要设置标题，请点击人设管理面板中的**<i class="fa-solid fa-pencil"></i> 重命名人设**按钮，并在“人设标题”字段中输入，或在创建人设时指定。若标题已存在，将其设置为空值则会移除它。

## 人设关联 / 锁定

人设关联确保在特定情况下自动选用指定的人设。如果未关联任何人设，则将保持当前选中的人设。

共有三种锁定类型：

1.  **<i class="fa-solid fa-unlock"></i> 聊天锁定** – 将人设锁定到当前聊天。
2.  **<i class="fa-solid fa-unlock"></i> 角色锁定** – 将人设锁定到特定角色。
3.  **<i class="fa-solid fa-crown"></i> 默认人设** – 一个在没有其他锁适用时始终使用的人设。

### 1. 锁定到聊天

如果将人设锁定到某个聊天，则将来打开该聊天时会自动将您的活跃人设切换为锁定的那个人设。

-   **锁定**：选中所需人设，然后点击“关联”部分下的 **<i class="fa-solid fa-unlock"></i> 聊天**按钮（或使用 `/persona-lock type=chat on`）。
-   **解锁**：再次点击该按钮（或使用 `/persona-lock type=chat off`）。

### 2. 锁定到角色

您也可以将人设链接到特定角色。打开与该角色的任何聊天都会自动选择您锁定的人设。

-   **锁定**：选中所需人设，然后点击“关联”部分下的 **<i class="fa-solid fa-unlock"></i> 角色**按钮（或使用 `/persona-lock type=character on`）。
-   **解锁**：再次点击该按钮（或使用 `/persona-lock type=character off`）。

人设管理面板也会显示哪些角色链接到了该人设（显示为小头像）。点击它们可直接导航到该角色的聊天窗口。

#### 将多个人设锁定到同一角色

如果该角色已链接了另一个人设，则默认情况下原链接会自动解除。

若要允许多个人设同时链接，可使用全局设置**允许每个角色存在多个人设关联**。
如果多个人设链接到同一角色，则每次打开或新建该角色的聊天时，您都会看到一个弹出窗口，询问要使用哪个人设（除非已有人设绑定到该聊天）。

### 3. 默认人设

您的**默认人设**会在没有其他相关锁定时使用。默认人设可通过其头像周围的黄色边框识别。

-   **设置/取消默认**：选中所需人设，然后点击“关联”部分下的 **<i class="fa-solid fa-crown"></i> 默认**按钮（或使用 `/persona-lock type=default`）。

只能选择一个人设作为默认人设。

### 临时人设

如果三种关联选项中的任何一种将某人设连接到当前角色/聊天，您仍然可以选择使用不同的人设。此人设将在人设面板中标记为“临时人设”。任何浏览器窗口的重载或切换到其他聊天再返回的操作都会将其重置回链接的人设。

您可以通过将其链接到聊天，手动将*临时人设* *转换*为持久关联。

## 全局人设设置

**当前人设**下的所有设置都是按人设保存的。也存在一些全局设置，这些可以在人设管理面板的**全局人设设置**下找到。

1.  **切换人设时显示通知**
    - 启用人设相关的提示消息（例如，“人设已自动选择”、“临时人设”）。
2.  **允许每个角色存在多个人设关联**
    - **启用**后，您可以将多个人设链接到单个角色。打开该角色的聊天时会提示您选择要使用的人设。若禁用，则一个角色一次只能连接一个人设。
3.  **自动将选中的人设锁定到聊天**
    - **启用**后，每当您选择一个人设（手动或自动选择）或创建新聊天时，都会将此人设锁定到该聊天。
      结合“允许多个”设置，这提供了按角色选择人设，但一旦为聊天选定即保持绑定的选项。

## 人设相关斜杠命令

### `/persona-lock type=<类型?>`

-   `chat` 将当前人设锁定到您的活跃聊天。
-   `character` 将当前人设锁定到正在使用的角色。
-   `none`（或无参数）解锁/清除当前上下文的人设锁定。
-   如果无参数使用，则返回当前锁定状态（如果未设置则返回错误）。
-   锁定状态可通过 `on`、`off` 或 `toggle` 选择。默认为 toggle。

### `/persona <名称>`

-   无需打开人设管理面板，即可按名称快速切换您的活跃人设。
-   示例：`/persona Blaze`。
-   使用 `mode=temp` 允许临时设置**当前**人设的名称，即使同名人设可能已存在（会保留您当前的头像和描述）。

### `/persona-sync`

-   将活跃聊天中的所有用户消息重新归属（re-attribute）到**当前**人设及其名称。

> **注意：** 旧的 `/lock` 和 `/unlock` 命令为向后兼容而保留，但未来可能会移除。请使用 `/persona-lock`。

## 💡 高级技巧

1.  **在聊天中途切换人设**不会将您过去的用户消息重新归属到新的人设；这些消息仍归属于您发送时使用的人设。
2.  **批量重新归属**：如果您需要所有先前的消息都匹配新的人设，请点击**同步**按钮或使用 `/persona-sync`。
3.  **更换人设图像**而不丢失描述或锁定：选择您的人设并点击 **<i class="fa-solid fa-images"></i> 更改人设图像**按钮。
4.  **角色链接弹出窗口**：如果多个人设链接到同一角色，每次打开聊天时都会弹出窗口让您选择人设。这是一种为特定角色准备少量人设以供选择的便捷方法。
5.  **备份**：您可以使用人设管理中的**备份**按钮备份整个人设列表（名称、角色关联、描述），并在需要时恢复。

!!!tip 备份说明

-   图像和聊天关联不会与人设一起保存，也不会通过此方式备份。
-   这些备份包含内部链接，并非设计用于共享。

!!!